Цель проекта 

Разработка микросервиса, который предоставит системным администраторам функционал для оптимизации и упрощения массовых действий над пользователями в midPoint с помощью различных фильтров.


Предметная область проекта

В обязанности системного администратора входит множество рутинных задач, время на выполнение которых может быть как небольшим, так и существенным. Процесс выполнения некоторых задач возможно оптимизировать, что поможет сконцентрировать внимание системного администратора на решении более важных для компании задач.


Существующая проблема

Часто случается, что системному администратору необходимо совершать какие либо действия над пользователями внутри проекта. Приходится вручную выполнять большое количество однотипных действий для добавления/изменений прав доступа группы пользователей, выдача ролей и назначение ресурсов. 

 
Предполагаемое решение

Микросервис, который будет автоматизировать работу с пользователями, а именно: удаление пользователей, назначение ролей.

 
Характеристика продукта

Микросервис, разрабатываемый в рамках этого проекта, предоставляет системным администраторам  функционал для массовых операций над пользователями с различными параметрами в midPoint. Массовые операции - это некоторый фильтр, который отбирает пользователей по заданным параметрам.

Системные администраторы могут осуществлять следующие массовые операции:

удалить пользователей 

выдать роли пользователям

назначать ресурсы пользователям

 

Описание работы продукта

Системный администратор открывает тикет в Jira. В нем создает подзадачу, ее название - это операция, которую нужно совершить, а описание - определенный фильтр в формате XML – параметры, по которым будут отобраны пользователи. Например, имя пользователя начинается на определенную букву. После создания подзадача получает статус - “новая”.

Микросервис каждую минуту сканирует Jira на наличие подзадачи со статусом “новый“. Получает название операции и описание фильтра. Меняется статус подзадачи в Jira на “в процессе“. После этого отправляет запрос в midPoint.

В Docker запущен  midPoint. Происходит выполнение операции: через query - это rest API запрос с фильтром в формате XML - получаем OID (Object identifier) пользователей с указанными параметрами. К  выбранным пользователям по OID с помощью PATCH запроса применяются изменения.

После завершения этих действий происходит смена статуса статус подзадачи в Jira на “готово“.


Код написан на Java с использованием фреймворка spring. В проекте используется sonar для проверки кода и приведения его вида к общему стандарту для всей команды. Также присутствуют unit тесты.

 

Требования к программному решению

Роли:

Системный администратор - пользователь микросервиса, который создает запрос на операцию над пользователями системы с определенным фильтром в Jira.

Функциональные требования для роли системный администратор:

Создание запроса на операцию с определенным фильтром в Jira

В тикете Jira создать подзадачу с нужной операцией и фильтром в формате XML, составленным системным администратором по шаблону.


Нефункциональные требования:

Необходимо поддерживать последовательное выполнение запросов от системных администраторов, чтобы избежать коллизий.

 

Ограничения и допущения

При разработке проекта принято допущение, что микросервис будет запускаться в Docker. На данный момент, производительность проекта ограничена ресурсами ноутбука, но котором будет запущен микросервис. Также принято допущение, что для создания фильтра, который системный администратор составляет самостоятельно по шаблону, будет использоваться формат XML.
